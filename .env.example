# ==================================================================
# Mini Numbers - Configuration Template
# ==================================================================
# Copy this file to .env and fill in your values
#
# Quick Start:
# 1. Copy: cp .env.example .env
# 2. Generate server salt: openssl rand -hex 64
# 3. Set ADMIN_PASSWORD and SERVER_SALT below
# 4. Start: ./gradlew run
# ==================================================================

# ==================================================================
# SECURITY CONFIGURATION (REQUIRED)
# ==================================================================

# Admin panel credentials
# Default username is "admin", change if desired
ADMIN_USERNAME=admin

# Admin panel password - REQUIRED!
# Set a strong password for production
# Leave empty in this template, must be set in your .env
ADMIN_PASSWORD=

# Server salt for visitor hash generation - REQUIRED!
# Used for privacy-preserving visitor identification
# Must be at least 32 characters long
# Generate with: openssl rand -hex 64
# IMPORTANT: Keep this secret and never commit to version control!
SERVER_SALT=

# Allowed origins for CORS (comma-separated list)
#
# Examples:
#   Development (allow all):
#     ALLOWED_ORIGINS=*
#
#   Production (specific domains):
#     ALLOWED_ORIGINS=https://example.com,https://app.example.com
#
#   No cross-origin requests:
#     ALLOWED_ORIGINS=
#
# Note: In development mode (KTOR_DEVELOPMENT=true), all origins are allowed
# regardless of this setting
ALLOWED_ORIGINS=*

# ==================================================================
# DATABASE CONFIGURATION
# ==================================================================

# Database type: SQLITE or POSTGRESQL
# SQLite is simpler and recommended for single-server deployments
# PostgreSQL is recommended for high-traffic or multi-server setups
DB_TYPE=SQLITE

# ----------------
# SQLite Configuration (if DB_TYPE=SQLITE)
# ----------------
# Path to SQLite database file (relative or absolute)
DB_SQLITE_PATH=./stats.db

# ----------------
# PostgreSQL Configuration (if DB_TYPE=POSTGRESQL)
# ----------------
# Uncomment and configure these if using PostgreSQL

# PostgreSQL host (default: localhost)
# DB_PG_HOST=localhost

# PostgreSQL port (default: 5432)
# DB_PG_PORT=5432

# PostgreSQL database name (default: mini_numbers)
# DB_PG_NAME=mini_numbers

# PostgreSQL username (default: postgres)
# DB_PG_USERNAME=postgres

# PostgreSQL password - REQUIRED if using PostgreSQL
# DB_PG_PASSWORD=

# Maximum connection pool size (default: 3)
# DB_PG_MAX_POOL_SIZE=3

# ==================================================================
# SERVER CONFIGURATION
# ==================================================================

# Server port (default: 8080)
SERVER_PORT=8080

# Development mode flag
# true  = Development mode (verbose logging, hot reload, relaxed CORS)
# false = Production mode (secure defaults, stricter validation)
KTOR_DEVELOPMENT=true

# ==================================================================
# GEOIP CONFIGURATION
# ==================================================================

# Path to MaxMind GeoLite2 City database
# Download from: https://dev.maxmind.com/geoip/geolite2-free-geolocation-data
# Default path assumes database is in resources directory
GEOIP_DATABASE_PATH=src/main/resources/geo/geolite2-city.mmdb

# ==================================================================
# RATE LIMITING CONFIGURATION
# ==================================================================

# Maximum requests per minute per IP address
# Prevents abuse and DDoS attacks from single source
# Default: 1000 requests/minute
# Adjust based on your expected traffic patterns
RATE_LIMIT_PER_IP=1000

# Maximum requests per minute per API key (per project)
# Prevents misconfigured or malicious trackers from overloading server
# Default: 10000 requests/minute
# High limit suitable for busy websites
RATE_LIMIT_PER_API_KEY=10000

# ==================================================================
# NOTES & BEST PRACTICES
# ==================================================================
#
# Security Best Practices:
# - Use strong, unique passwords (min 12 characters)
# - Generate server salt with cryptographic randomness
# - Keep .env file out of version control (already in .gitignore)
# - Use specific ALLOWED_ORIGINS in production (not *)
# - Set KTOR_DEVELOPMENT=false in production
#
# Database Recommendations:
# - SQLite: Great for < 1M events, single server
# - PostgreSQL: Recommended for > 1M events or multi-server
# - Backup your database regularly
#
# Rate Limiting Guidelines:
# - Personal website: RATE_LIMIT_PER_IP=100-500
# - Small business site: RATE_LIMIT_PER_IP=500-1000
# - High-traffic site: RATE_LIMIT_PER_IP=1000-5000
# - Adjust RATE_LIMIT_PER_API_KEY based on expected pageviews
#
# Testing Your Configuration:
# 1. Start the server: ./gradlew run
# 2. Check logs for "Configuration loaded successfully"
# 3. Test admin login with your ADMIN_PASSWORD
# 4. Send test pageview to /collect endpoint
#
# ==================================================================
